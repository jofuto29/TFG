<div class="adminComponent col-md-12 mt-3">
    <h1>Registrata una nueva reparación</h1>
  
    <div class="alert alert-success" *ngIf="status == 'success' ">
      El registro se ha completado correctamente
    </div>
    <div class="alert alert-danger" *ngIf="status == 'error' ">
      El registro no se ha completado correctamente. Introduzca correctamente los datos.
    </div>
  
    <!--formulario de registro-->
    <form class="col-md-5 ml-0 pl-0" #registerReparationForm="ngForm" (ngSubmit)="onSubmit(registerReparationForm)">
  
        <div class="form-group">
            <label for="id_vehicle">Vehículo:</label>
            <select name="id_vehicle" id="id_vehicle" class="form-control" 
              [(ngModel)]="reparationData.id_vehicle" required>
              <option *ngFor="let vehicle of vehicles" [value]="vehicle.id_vehicle">Vehículo:{{ vehicle.id_vehicle }} ----- Matrícula:{{ vehicle.registration }}</option>
            </select>
            <small *ngIf="!reparationData.id_vehicle" class="invalid-feedback d-block">
              Selecciona un vehículo
            </small>
        </div>

        <div class="form-group">
            <label for="startDate">Fecha de inicio:</label>
            <input type="datetime-local" name="startDate" id="startDate" class="form-control"
              #startDate="ngModel" [(ngModel)]="reparationData.startDate" required>
            <small *ngIf="!startDate.valid && startDate.touched" class="invalid-feedback d-block">
              Fecha no valida
            </small>
        </div>

        <div class="form-group">
            <label for="endDate">Fecha de inicio:</label>
            <input type="datetime-local" name="endDate" id="endDate" class="form-control"
              #endDate="ngModel" [(ngModel)]="reparationData.endDate" required>
            <small *ngIf="!endDate.valid && endDate.touched" class="invalid-feedback d-block">
              Fecha no valida
            </small>
        </div>

        <div class="form-group">
            <label for="problemDescription">Descripción del problema:</label>
            <textarea name="problemDescription" id="problemDescription" placeholder="¿Descripción del problema?" class="form-control"
              #problemDescription="ngModel" [(ngModel)]="reparationData.problemDescription" required
              pattern="^[a-zA-Z0-9\sáéíóúÁÉÍÓÚüÜñÑ,.:;-]+$"></textarea>
            <small *ngIf="!problemDescription.valid && problemDescription.touched" class="invalid-feedback d-block">
              Descripción no es válida
            </small>
        </div>

        <div class="form-group">
            <label for="solutionDescription">Descripción de la solución:</label>
            <textarea name="solutionDescription" id="solutionDescription" placeholder="¿Descripción de la solución?" class="form-control"
              #solutionDescription="ngModel" [(ngModel)]="reparationData.solutionDescription" required
              pattern="^[a-zA-Z0-9\sáéíóúÁÉÍÓÚüÜñÑ,.:;-]+$"></textarea>
            <small *ngIf="!solutionDescription.valid && solutionDescription.touched" class="invalid-feedback d-block">
              Descripción no es válida
            </small>
        </div>

        <div class="form-group">
          <label for="state">Estado:</label>
          <input type="text" name="state" id="state" placeholder="Estado de la reparación" class="form-control"
            #state="ngModel" [(ngModel)]="reparationData.state" required>
          <small *ngIf="!state.valid && state.touched" class="invalid-feedback d-block">
                Estado invalido
          </small>
        </div>

        <div class="buttonAdmin form-group">
            <input type="submit" value="Registrar" class="btn btn-success" [disabled]="registerReparationForm.invalid">
        </div>
  
        <div class="buttonAdmin form-group">
            <span class="btn btn-success" [routerLink]="['/reparations']" > Volver atrás</span>
        </div>
  
    </form>
  </div>
